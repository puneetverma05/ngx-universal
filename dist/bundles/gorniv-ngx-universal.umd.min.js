!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common/http"),require("@angular/platform-browser"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("@gorniv/ngx-universal",["exports","@angular/core","@angular/common/http","@angular/platform-browser","rxjs","rxjs/operators","@angular/common"],e):e(((t=t||self).gorniv=t.gorniv||{},t.gorniv["ngx-universal"]={}),t.ng.core,t.ng.common.http,t.ng.platformBrowser,t.rxjs,t.rxjs.operators,t.ng.common)}(this,(function(t,e,r,o,n,i,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function a(t,e,r,o){var n,i=arguments.length,s=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,o);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(i<3?n(s):i>3?n(e,r,s):n(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function u(t,e){return function(r,o){e(r,o,t)}}function p(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}var f=function(){function t(t,e,r){this.transferState=t,this.httpClient=e,this.platformId=r}return t.prototype.request=function(t,e,r){var o=this;return this.getData(t,e,r,(function(t,e,r){return o.httpClient.request(t,e,r)}))},t.prototype.get=function(t,e){var r=this;return this.getData("get",t,e,(function(t,e,o){return r.httpClient.get(e,o)}))},t.prototype.post=function(t,e,r){var o=this;return this.getPostData("post",t,e,r,(function(t,e,r,n){return o.httpClient.post(e,r,n)}))},t.prototype.put=function(t,e,r){var o=this;return this.getPostData("put",t,e,r,(function(t,e,r,n){return o.httpClient.put(e,r,n)}))},t.prototype.delete=function(t,e){var r=this;return this.getData("delete",t,e,(function(t,e,o){return r.httpClient.delete(e,o)}))},t.prototype.patch=function(t,e,r){var o=this;return this.getPostData("patch",t,e,r,(function(t,e,r,n){return o.httpClient.patch(e,r,n)}))},t.prototype.head=function(t,e){var r=this;return this.getData("head",t,e,(function(t,e,o){return r.httpClient.head(e,o)}))},t.prototype.options=function(t,e){var r=this;return this.getData("options",t,e,(function(t,e,o){return r.httpClient.options(e,o)}))},t.prototype.getData=function(t,e,r,n){var c=this,a=e;"string"!=typeof e&&(a=e.url);var u=a+(r?JSON.stringify(r):""),p=o.makeStateKey(u);try{return this.resolveData(p)}catch(o){return n(t,e,r).pipe(i.tap((function(t){s.isPlatformBrowser(c.platformId),s.isPlatformServer(c.platformId)&&c.setCache(p,t)})))}},t.prototype.getPostData=function(t,e,r,n,c){var a=this,u=e;"string"!=typeof e&&(u=e.url);var p=u+(r?JSON.stringify(r):"")+(n?JSON.stringify(n):""),f=o.makeStateKey(p);try{return this.resolveData(f)}catch(o){return c(t,e,r,n).pipe(i.tap((function(t){s.isPlatformBrowser(a.platformId),s.isPlatformServer(a.platformId)&&a.setCache(f,t)})))}},t.prototype.resolveData=function(t){var e=this.getFromCache(t);if(!e)throw new Error;return s.isPlatformBrowser(this.platformId)&&this.transferState.remove(t),s.isPlatformServer(this.platformId),n.from(Promise.resolve(e))},t.prototype.setCache=function(t,e){return this.transferState.set(t,e)},t.prototype.getFromCache=function(t){return this.transferState.get(t,null)},t.ctorParameters=function(){return[{type:o.TransferState},{type:r.HttpClient},{type:Object,decorators:[{type:e.Inject,args:[e.PLATFORM_ID]}]}]},t=a([e.Injectable(),u(2,e.Inject(e.PLATFORM_ID)),p("design:paramtypes",[o.TransferState,r.HttpClient,Object])],t)}(),l=function(){function t(){}return t=a([e.NgModule({providers:[f]})],t)}();function h(t){return null==t}function d(t){return null!=t}function y(t){return"string"==typeof t}function g(t,e){return e?{path:d(e.path)?e.path:t.path,domain:d(e.domain)?e.domain:t.domain,expires:d(e.expires)?e.expires:t.expires,secure:d(e.secure)?e.secure:t.secure,httpOnly:d(e.httpOnly)?e.httpOnly:t.httpOnly,storeUnencoded:d(e.storeUnencoded)?e.storeUnencoded:t.storeUnencoded}:t}function m(t){try{return decodeURIComponent(t)}catch(e){return t}}function v(t){try{return JSON.parse(t)}catch(e){return t}}var O=new e.InjectionToken("COOKIE_OPTIONS"),j=function(){function t(t,e){void 0===t&&(t={}),this._injector=e,this.defaultOptions={path:this._injector.get(s.APP_BASE_HREF,"/"),domain:null,expires:null,secure:!1,httpOnly:!1},this._options=g(this.defaultOptions,t)}return Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[O]}]},{type:e.Injector}]},t=a([e.Injectable(),u(0,e.Inject(O)),p("design:paramtypes",[Object,e.Injector])],t)}(),b=function(){function t(t){this._optionsProvider=t,this.options=this._optionsProvider.options}return Object.defineProperty(t.prototype,"cookieString",{get:function(){return document.cookie||""},set:function(t){document.cookie=t},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return this._cookieReader()[t]},t.prototype.getObject=function(t){var e=this.get(t);return e?v(e):e},t.prototype.getAll=function(){return this._cookieReader()},t.prototype.put=function(t,e,r){this._cookieWriter()(t,e,r)},t.prototype.putObject=function(t,e,r){this.put(t,JSON.stringify(e),r)},t.prototype.remove=function(t,e){this._cookieWriter()(t,void 0,e)},t.prototype.removeAll=function(t){var e=this,r=this.getAll();Object.keys(r).forEach((function(r){e.remove(r,t)}))},t.prototype._cookieReader=function(){var t,e,r,o,n,i={},s="",c=this.cookieString;if(c!==s)for(t=(s=c).split("; "),i={},r=0;r<t.length;r++)(o=(e=t[r]).indexOf("="))>0&&h(i[n=m(e.substring(0,o))])&&(i[n]=m(e.substring(o+1)));return i},t.prototype._cookieWriter=function(){var t=this;return function(e,r,o){t.cookieString=t._buildCookieString(e,r,o)}},t.prototype._buildCookieString=function(t,e,r){var o=g(this.options,r),n=o.expires;h(e)&&(n="Thu, 01 Jan 1970 00:00:00 GMT",e=""),y(n)&&(n=new Date(n));var i=o.storeUnencoded?e:encodeURIComponent(e),s=encodeURIComponent(t)+"="+i;s+=o.path?";path="+o.path:"",s+=o.domain?";domain="+o.domain:"",s+=n?";expires="+n.toUTCString():"",s+=o.sameSite?";sameSite="+o.sameSite:"",s+=o.secure?";secure":"";var c=(s+=o.httpOnly?"; HttpOnly":"").length+1;return c>4096&&console.log("Cookie '"+t+"' possibly not set or overflowed because it was too large ("+c+" > 4096 bytes)!"),s},t.ctorParameters=function(){return[{type:j}]},t=a([e.Injectable(),p("design:paramtypes",[j])],t)}(),k=function(){},S=function(){},I=function(t){function r(e,r,o){var n=t.call(this,o)||this;return n.request=e,n.response=r,n}return function(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(r,t),Object.defineProperty(r.prototype,"cookieString",{get:function(){return this.request.cookie||this.request.headers.cookie||""},set:function(t){this.request.cookie=t,this.response.cookie=t},enumerable:!0,configurable:!0}),r.prototype.put=function(t,e,r){var o=this;void 0===r&&(r={});var n=!1,i=Object.keys(this.getAll()).map((function(r){return r===t?(n=!0,t+"="+e):r+"="+o.get(r)})).join("; ");n||(i+="; "+t+"="+e),this.request.headers.cookie=i,this.cookieString=i},r.prototype.remove=function(t,e){var r=this,o=Object.keys(this.getAll()).map((function(e){return e===t?"":e+"="+r.get(e)})).join("; ");this.request.headers.cookie=o,this.cookieString=o},r.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[k]}]},{type:void 0,decorators:[{type:e.Inject,args:[S]}]},{type:j}]},r=a([e.Injectable(),u(0,e.Inject(k)),u(1,e.Inject(S)),p("design:paramtypes",[Object,Object,j])],r)}(b);function C(t){return new b(t)}var P=function(){function t(){}var r;return r=t,t.forRoot=function(t){return void 0===t&&(t={}),{ngModule:r,providers:[{provide:O,useValue:t},{provide:b,useFactory:C,deps:[j]}]}},t.forChild=function(t){return void 0===t&&(t={}),{ngModule:r,providers:[{provide:O,useValue:t},{provide:b,useFactory:C,deps:[j]}]}},t=r=a([e.NgModule({providers:[j]})],t)}(),_=function(){function t(t,e){this.rendererFactory=t,this.document=e}return t.prototype.addTag=function(t,r){try{var o=this.rendererFactory.createRenderer(this.document,{id:"-1",encapsulation:e.ViewEncapsulation.None,styles:[],data:{}}),n=o.createElement("link"),i=this.document.head;this._parseSelector(t);if(null===i)throw new Error("<head> not found within DOCUMENT.");Object.keys(t).forEach((function(e){return o.setAttribute(n,e,t[e])})),o.appendChild(i,n)}catch(t){console.error("Error within linkService : ",t)}},t.prototype._parseSelector=function(t){var e=t.rel?"rel":"hreflang";return e+'="'+t[e]+'"'},t.ctorParameters=function(){return[{type:e.RendererFactory2},{type:void 0,decorators:[{type:e.Inject,args:[s.DOCUMENT]}]}]},t=a([e.Injectable({providedIn:"root"}),e.Injectable(),u(1,e.Inject(s.DOCUMENT)),p("design:paramtypes",[e.RendererFactory2,Object])],t)}(),R=function(){function t(){}return t=a([e.NgModule({imports:[s.CommonModule],providers:[_]})],t)}();t.COOKIE_OPTIONS=O,t.CookieBackendService=I,t.CookieModule=P,t.CookieOptionsProvider=j,t.CookieService=b,t.LinkModule=R,t.LinkService=_,t.NgxRequest=k,t.NgxResponse=S,t.TransferHttpModule=l,t.TransferHttpService=f,t.cookieServiceFactory=C,t.isBlank=h,t.isPresent=d,t.isString=y,t.mergeOptions=g,t.safeDecodeURIComponent=m,t.safeJsonParse=v,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=gorniv-ngx-universal.umd.min.js.map